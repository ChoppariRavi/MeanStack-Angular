<h1 class="page-header">Regitration Page</h1>
<!-- Custom Error/Success Message -->
<div class="row show-hide-message">
  <div [ngClass]="messageClass">
    {{message}}
  </div>
</div>
  <form [formGroup]='form' (submit)="onRegisterSubmit()" novalidate>
    <div class="form-group row">
      <label for="inputEmail3" class="col-sm-2 col-form-label">Email</label>
      <div class="col-sm-10" [ngClass]="{'has-error': (form.controls.email.errors && form.controls.email.dirty) || (!emailValid && form.controls.email.dirty), 'has-success': (!form.controls.email.errors && emailValid)}">
        <input type="email" name="email" class="form-control" id="inputEmail3" (blur)="checkEmail()" placeholder="Email" formControlName="email" autocomplete="off" required>
        <ul class="help-block">
          <li *ngIf="form.controls.email.errors?.required && form.controls.email.dirty">This field is required.</li>
          <li *ngIf="(form.controls.email.errors?.minlength && form.controls.email.dirty) || (form.controls.email.errors?.maxlength && form.controls.email.dirty)">Minimum characters: 5, Maximum characters: 30</li>
          <li *ngIf="form.controls.email.errors?.validateMail && form.controls.email.dirty">This must be a valid e-mail.</li>
          <li *ngIf="emailMessage">{{emailMessage}}</li>
        </ul>
      </div>
    </div>
    <div class="form-group row">
      <label for="inputEmail3" class="col-sm-2 col-form-label">Username</label>
      <div class="col-sm-10"  [ngClass]="{'has-error': (form.controls.username.errors && form.controls.username.dirty) || (!usernameValid && form.controls.username.dirty), 'has-success': (!form.controls.username.errors && usernameValid)}">
        <input type="email" name="username" class="form-control" id="inputEmail3" (blur)="checkUserName()" placeholder="username" formControlName="username" autocomplete="off" required>
        <ul class="help-block">
          <li *ngIf="form.controls.username.errors?.required && form.controls.username.dirty">This field is required.</li>
          <li *ngIf="(form.controls.username.errors?.minlength && form.controls.username.dirty) || (form.controls.username.errors?.maxlength && form.controls.username.dirty)">Minimum characters: 3, Maximum characters: 15</li>
          <li *ngIf="form.controls.username.errors?.validateUserName && form.controls.username.dirty">Username must not have any special characters.</li>
          <li *ngIf="usernameMessage">{{usernameMessage}}</li>
        </ul>
      </div>
    </div>
    <div class="form-group row">
      <label for="inputPassword3" class="col-sm-2 col-form-label">Password</label>
      <div class="col-sm-10" [ngClass]="{'has-error': form.controls.password.errors && (form.controls.password.dirty || form.controls.password.touched), 'has-success': !form.controls.password.errors}">
        <input type="password" name="password" class="form-control" id="inputPassword3" placeholder="Password" formControlName="password" autocomplete="off" required>
        <ul class="help-block">
          <li *ngIf="form.controls.password.errors?.required && form.controls.password.dirty">This field is required.</li>
          <li *ngIf="(form.controls.password.errors?.minlength && form.controls.password.dirty) || (form.controls.password.errors?.maxlength && form.controls.password.dirty)">Minimum characters: 8, Maximum characters: 35</li>
          <li *ngIf="form.controls.password.errors?.validatePassword && form.controls.password.dirty">Password Must have at least one uppercase, lowercase, special character, and number</li>
        </ul>
      </div>
    </div>
    <div class="form-group row">
      <label for="inputPassword3" class="col-sm-2 col-form-label">Confirm</label>
      <div class="col-sm-10"  [ngClass]="{'has-error': (form.controls.confirm.errors && (form.controls.confirm.dirty || form.controls.confirm.touched)) || (form.errors?.matchPasswords && (form.controls.confirm.dirty || form.controls.confirm.touched)), 'has-success': !form.controls.confirm.errors && !form.errors?.matchPasswords}">
        <input type="password" name="confirm" class="form-control" id="inputPassword3" placeholder="*confirm password" formControlName="confirm" autocomplete="off" required>
        <ul class="help-block">
          <li *ngIf="form.controls.confirm.errors?.required && form.controls.confirm.dirty">This field is required.</li>
          <li *ngIf="form.errors?.matchPasswords &&  form.controls.confirm.dirty">Password do not match</li>
        </ul>
      </div>
    </div>
    <div class="form-group row">
      <div class="col-sm-10">
        <!-- Submit Input -->
        <!-- <input [disabled]="!form.valid || processing || !emailValid || !usernameValid" type="submit" class="btn btn-primary" value="Submit" /> -->
        <button [disabled]="!form.valid || processing || !emailValid || !usernameValid" type="submit" class="btn btn-primary">Register</button>
      </div>
    </div>
  </form>

<!-- <p>{{form.value | json}}</p> -->
